é—®é¢˜
Sorry, supervisord responded but did not recognize the supervisor namespace commands that supervisorctl uses to control it.  Please check that the [rpcinterface:supervisor] section is enabled in the configuration file (see sample.conf).

Add this to your /etc/supervisord.conf:

[rpcinterface:supervisor]
supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface
And restart supervisord:

sudo /etc/init.d/supervisord restart


è„šæœ¬
[root@ySex-manager001 ySex]# cat /etc/init.d/supervisord 
#!/bin/bash
#
# supervisord   This scripts turns supervisord on
#
# Author:       Mike McGrath <mmcgrath@redhat.com> (based off yumupdatesd)
#
# chkconfig:    - 95 04
#
# description:  supervisor is a process control utility.  It has a web based
#               xmlrpc interface as well as a few other nifty features.
# processname:  supervisord
# config: /etc/supervisord.conf
# pidfile: /var/run/supervisord.pid
#

# source function library
. /etc/rc.d/init.d/functions

RETVAL=0

start() {
        echo -n $"Starting supervisord: "
        daemon supervisord
        RETVAL=$?
        echo
        [ $RETVAL -eq 0 ] && touch /var/lock/subsys/supervisord
}

stop() {
        echo -n $"Stopping supervisord: "
        killproc supervisord
        echo
        [ $RETVAL -eq 0 ] && rm -f /var/lock/subsys/supervisord
}

restart() {
        stop
        start
}

case "$1" in
  start)
        start
        ;;
  stop) 
        stop
        ;;
  restart|force-reload|reload)
        restart
        ;;
  condrestart)
        [ -f /var/lock/subsys/supervisord ] && restart
        ;;
  status)
        status supervisord
        RETVAL=$?
        ;;
  *)
        echo $"Usage: $0 {start|stop|status|restart|reload|force-reload|condrestart}"
        exit 1
esac

exit $RETVAL

(reverse-i-search)`w': du -sh /data/liyang/^Crk/ysex/erotic_consumer_supervisor_stdout.log
[root@42 ~]# egrep -v "^$|^;" /etc/supervisord.conf               
[unix_http_server]
file=/tmp/supervisor.sock   ; the path to the socket file
[supervisord]
logfile=/tmp/supervisord.log ; main log file; default $CWD/supervisord.log
logfile_maxbytes=50MB        ; max main logfile bytes b4 rotation; default 50MB
logfile_backups=10           ; # of main logfile backups; 0 means none, default 10
loglevel=info                ; log level; default info; others: debug,warn,trace
pidfile=/tmp/supervisord.pid ; supervisord pidfile; default supervisord.pid
nodaemon=false               ; start in foreground if true; default false
minfds=1024                  ; min. avail startup file descriptors; default 1024
minprocs=200                 ; min. avail process descriptors;default 200
[rpcinterface:supervisor]
supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface
[supervisorctl]
serverurl=unix:///tmp/supervisor.sock ; use a unix:// URL  for a unix socket
[program:cerotic]
directory=/data/liyang/work/ysex/
autostart=False
autorestart=True
command=python2 minivideo_consumer.py
stdout_logfile_maxbytes=50MB
stdout_logfile_backups=20
stdout_logfile=/data/liyang/work/ysex/erotic_consumer_supervisor_stdout.log
[program:myuwsgi]
directory=/data/liyang/
autostart=False
autorestart=True
command=/usr/local/bin/uwsgi --ini myuwsgi.ini
stdout_logfile_maxbytes=50MB
stdout_logfile_backups=20
stdout_logfile=/data/liyang/myuwsgi.log
[root@42 ~]# supervisord -v
3.3.4
[root@42 ~]# uname -a
Linux 42.62.27.78 2.6.32-696.1.1.el6.x86_64 #1 SMP Tue Apr 11 17:13:24 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux

CentOS7é…ç½®Supervisorå¼€æœºå¯åŠ¨
2017å¹´06æœˆ26æ—¥

é…ç½®Supervisorå¼€æœºå¯åŠ¨ï¼š

æ–°å»ºä¸€ä¸ªâ€œsupervisord.serviceâ€æ–‡ä»¶

dservice for systemd (CentOS 7.0+)
by ET-CS (https://github.com/ET-CS)
[Unit] 
Description=Supervisor daemon

[Service] 
Type=forking 
ExecStart=/usr/bin/supervisord -c /etc/supervisor/supervisord.conf 
ExecStop=/usr/bin/supervisorctl shutdown 
ExecReload=/usr/bin/supervisorctl reload 
KillMode=process 
Restart=on-failure 
RestartSec=42s

[Install] 
WantedBy=multi-user.target

å°†æ–‡ä»¶æ‹·è´è‡³ï¼šâ€œ/usr/lib/systemd/system/supervisord.serviceâ€

é…ç½®å¼€æœºè‡ªå¯ 
systemctl enable supervisord

éªŒè¯ä¸€ä¸‹æ˜¯å¦ä¸ºå¼€æœºå¯åŠ¨ï¼šsystemctl is-enabled supervisord


supervisor å®‰è£…ã€é…ç½®ã€å¸¸ç”¨å‘½ä»¤
å‰è¨€
åœ¨ web åº”ç”¨éƒ¨ç½²åˆ°çº¿ä¸Šåï¼Œéœ€è¦ä¿è¯åº”ç”¨ä¸€ç›´å¤„äºè¿è¡ŒçŠ¶æ€ï¼Œåœ¨é‡åˆ°ç¨‹åºå¼‚å¸¸ã€æŠ¥é”™ç­‰æƒ…å†µï¼Œå¯¼è‡´ web åº”ç”¨ç»ˆæ­¢æ—¶ï¼Œéœ€è¦ä¿è¯ç¨‹åºå¯ä»¥ç«‹åˆ»é‡å¯ï¼Œç»§ç»­æä¾›æœåŠ¡ã€‚

æ‰€ä»¥ï¼Œå°±éœ€è¦ä¸€ä¸ªå·¥å…·ï¼Œæ—¶åˆ»ç›‘æ§ web åº”ç”¨çš„è¿è¡Œæƒ…å†µï¼Œç®¡ç†è¯¥è¿›ç¨‹ã€‚

Supervisor å°±æ˜¯è§£å†³è¿™ç§éœ€æ±‚çš„å·¥å…·ï¼Œå¯ä»¥ä¿è¯ç¨‹åºå´©æºƒåï¼Œé‡æ–°æŠŠç¨‹åºå¯åŠ¨èµ·æ¥ç­‰åŠŸèƒ½ã€‚

ç®€ä»‹
Supervisor æ˜¯ä¸€ä¸ªç”¨ Python å†™çš„è¿›ç¨‹ç®¡ç†å·¥å…·ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„ç”¨æ¥åœ¨ UNIX-like ç³»ç»Ÿï¼ˆä¸æ”¯æŒ Windowsï¼‰ä¸‹å¯åŠ¨ã€é‡å¯ï¼ˆè‡ªåŠ¨é‡å¯ç¨‹åºï¼‰ã€å…³é—­è¿›ç¨‹ï¼ˆä¸ä»…ä»…æ˜¯ Python è¿›ç¨‹ï¼‰ã€‚

å®‰è£…
Ubuntuç³»ç»Ÿä¸‹ï¼šapt-get install supervisorï¼Œé€šè¿‡è¿™ç§æ–¹å¼å®‰è£…åï¼Œè‡ªåŠ¨è®¾ç½®ä¸ºå¼€æœºå¯åŠ¨
ä¹Ÿå¯ä»¥é€šè¿‡ pip install supervisor è¿›è¡Œå®‰è£…ï¼Œä½†æ˜¯éœ€è¦æ‰‹åŠ¨å¯åŠ¨ï¼Œç„¶åè®¾ç½®ä¸ºå¼€æœºå¯åŠ¨ï¼ˆä¸æ¨èè¿™ç§å®‰è£…æ–¹å¼ï¼‰
Supervisor é…ç½®
Supervisor æ˜¯ä¸€ä¸ª C/S æ¨¡å‹çš„ç¨‹åºï¼Œsupervisord æ˜¯ server ç«¯ï¼Œsupervisorctl æ˜¯ client ç«¯ã€‚

supervisord
ä¸‹é¢ä»‹ç» supervisord é…ç½®æ–¹æ³•ã€‚supervisord çš„é…ç½®æ–‡ä»¶é»˜è®¤ä½äº /etc/supervisord.confï¼Œå†…å®¹å¦‚ä¸‹ï¼ˆ;åé¢ä¸ºæ³¨é‡Šï¼‰ï¼š

; supervisor config file

[unix_http_server]
file=/var/run/supervisor.sock   ; (the path to the socket file) UNIX socket æ–‡ä»¶ï¼Œsupervisorctl ä¼šä½¿ç”¨
chmod=0700                       ; sockef file mode (default 0700) socket æ–‡ä»¶çš„ modeï¼Œé»˜è®¤æ˜¯ 0700

[supervisord]
logfile=/var/log/supervisor/supervisord.log ; (main log file;default $CWD/supervisord.log) æ—¥å¿—æ–‡ä»¶ï¼Œé»˜è®¤æ˜¯ $CWD/supervisord.log
pidfile=/var/run/supervisord.pid ; (supervisord pidfile;default supervisord.pid) pid æ–‡ä»¶
childlogdir=/var/log/supervisor            ; ('AUTO' child log dir, default $TEMP)

; the below section must remain in the config file for RPC
; (supervisorctl/web interface) to work, additional interfaces may be
; added by defining them in separate rpcinterface: sections
[rpcinterface:supervisor]
supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface

[supervisorctl]
serverurl=unix:///var/run/supervisor.sock ; use a unix:// URL  for a unix socket é€šè¿‡ UNIX socket è¿æ¥ supervisordï¼Œè·¯å¾„ä¸ unix_http_server éƒ¨åˆ†çš„ file ä¸€è‡´

; åœ¨å¢æ·»éœ€è¦ç®¡ç†çš„è¿›ç¨‹çš„é…ç½®æ–‡ä»¶æ—¶ï¼Œæ¨èå†™åˆ° `/etc/supervisor/conf.d/` ç›®å½•ä¸‹ï¼Œæ‰€ä»¥ `include` é¡¹ï¼Œå°±éœ€è¦åƒå¦‚ä¸‹é…ç½®ã€‚
; åŒ…å«å…¶ä»–çš„é…ç½®æ–‡ä»¶
[include]
files = /etc/supervisor/conf.d/*.conf ; å¼•å…¥ `/etc/supervisor/conf.d/` ä¸‹çš„ `.conf` æ–‡ä»¶
program é…ç½®
program çš„é…ç½®æ–‡ä»¶å°±å†™åœ¨ï¼Œsupervisord é…ç½®ä¸­ include é¡¹çš„è·¯å¾„ä¸‹ï¼š/etc/supervisor/conf.d/ï¼Œç„¶å program çš„é…ç½®æ–‡ä»¶å‘½åè§„åˆ™æ¨èï¼šapp_name.conf

[program:app] ; ç¨‹åºåç§°ï¼Œåœ¨ supervisorctl ä¸­é€šè¿‡è¿™ä¸ªå€¼æ¥å¯¹ç¨‹åºè¿›è¡Œä¸€ç³»åˆ—çš„æ“ä½œ
autorestart=True      ; ç¨‹åºå¼‚å¸¸é€€å‡ºåè‡ªåŠ¨é‡å¯
autostart=True        ; åœ¨ supervisord å¯åŠ¨çš„æ—¶å€™ä¹Ÿè‡ªåŠ¨å¯åŠ¨
redirect_stderr=True  ; æŠŠ stderr é‡å®šå‘åˆ° stdoutï¼Œé»˜è®¤ false
environment=PATH="/home/app_env/bin"  ; å¯ä»¥é€šè¿‡ environment æ¥æ·»åŠ éœ€è¦çš„ç¯å¢ƒå˜é‡ï¼Œä¸€ç§å¸¸è§çš„ç”¨æ³•æ˜¯ä½¿ç”¨æŒ‡å®šçš„ virtualenv ç¯å¢ƒ
command=python server.py  ; å¯åŠ¨å‘½ä»¤ï¼Œä¸æ‰‹åŠ¨åœ¨å‘½ä»¤è¡Œå¯åŠ¨çš„å‘½ä»¤æ˜¯ä¸€æ ·çš„
user=ubuntu           ; ç”¨å“ªä¸ªç”¨æˆ·å¯åŠ¨
directory=/home/app/  ; ç¨‹åºçš„å¯åŠ¨ç›®å½•
stdout_logfile_maxbytes = 20MB  ; stdout æ—¥å¿—æ–‡ä»¶å¤§å°ï¼Œé»˜è®¤ 50MB
stdout_logfile_backups = 20     ; stdout æ—¥å¿—æ–‡ä»¶å¤‡ä»½æ•°
; stdout æ—¥å¿—æ–‡ä»¶ï¼Œéœ€è¦æ³¨æ„å½“æŒ‡å®šç›®å½•ä¸å­˜åœ¨æ—¶æ— æ³•æ­£å¸¸å¯åŠ¨ï¼Œæ‰€ä»¥éœ€è¦æ‰‹åŠ¨åˆ›å»ºç›®å½•ï¼ˆsupervisord ä¼šè‡ªåŠ¨åˆ›å»ºæ—¥å¿—æ–‡ä»¶ï¼‰
stdout_logfile = /data/logs/usercenter_stdout.log
éœ€è¦æ³¨æ„ï¼š

ç”¨ supervisord ç®¡ç†æ—¶ï¼Œgunicorn çš„ daemon é€‰é¡¹éœ€è¦è®¾ç½®ä¸º False
å¦‚æœå¯åŠ¨å‘½ä»¤éœ€è¦åŒ…å«workonï¼Œä¿®æ”¹environmentå‚æ•°ï¼šenvironment=PATH="/home/username/.virtualenvs/myproject/bin"
supervisorctl æ“ä½œ
supervisorctl æ˜¯ supervisord çš„å‘½ä»¤è¡Œå®¢æˆ·ç«¯å·¥å…·ï¼Œä½¿ç”¨çš„é…ç½®å’Œ supervisord ä¸€æ ·ï¼Œè¿™é‡Œå°±ä¸å†è¯´äº†ã€‚ä¸‹é¢ï¼Œä¸»è¦ä»‹ç» supervisorctl æ“ä½œçš„å¸¸ç”¨å‘½ä»¤ï¼š

è¾“å…¥å‘½ä»¤ supervisorctl è¿›å…¥ supervisorctl çš„ shell äº¤äº’ç•Œé¢ï¼ˆè¿˜æ˜¯çº¯å‘½ä»¤è¡ŒğŸ˜“ï¼‰ï¼Œå°±å¯ä»¥åœ¨ä¸‹é¢è¾“å…¥å‘½ä»¤äº†ã€‚ï¼š

help # æŸ¥çœ‹å¸®åŠ©
status # æŸ¥çœ‹ç¨‹åºçŠ¶æ€
stop program_name # å…³é—­ æŒ‡å®šçš„ç¨‹åº
start program_name # å¯åŠ¨ æŒ‡å®šçš„ç¨‹åº
restart program_name # é‡å¯ æŒ‡å®šçš„ç¨‹åº
tail -f program_name # æŸ¥çœ‹ è¯¥ç¨‹åºçš„æ—¥å¿—
update # é‡å¯é…ç½®æ–‡ä»¶ä¿®æ”¹è¿‡çš„ç¨‹åºï¼ˆä¿®æ”¹äº†é…ç½®ï¼Œé€šè¿‡è¿™ä¸ªå‘½ä»¤åŠ è½½æ–°çš„é…ç½®)
ä¹Ÿå¯ä»¥ç›´æ¥é€šè¿‡ shell å‘½ä»¤æ“ä½œï¼š

supervisorctl status
supervisorctl update


Supervisoré‡æ–°åŠ è½½é…ç½®å¯åŠ¨æ–°çš„è¿›ç¨‹
2016å¹´04æœˆ14æ—¥ 18:26:45 source188 é˜…è¯»æ•°ï¼š48198 æ ‡ç­¾ï¼š supervisord
Supervisoré‡æ–°åŠ è½½é…ç½®å¯åŠ¨æ–°çš„è¿›ç¨‹
liaojie å‘å¸ƒäº 1å¹´å‰ï¼Œå…±æœ‰ 0 æ¡è¯„è®º

ä¸€ã€æ·»åŠ å¥½é…ç½®æ–‡ä»¶å

äºŒã€æ›´æ–°æ–°çš„é…ç½®åˆ°supervisord    

supervisorctl update
ä¸‰ã€é‡æ–°å¯åŠ¨é…ç½®ä¸­çš„æ‰€æœ‰ç¨‹åº

supervisorctl reload
å››ã€å¯åŠ¨æŸä¸ªè¿›ç¨‹(program_name=ä½ é…ç½®ä¸­å†™çš„ç¨‹åºåç§°)

supervisorctl start program_name
äº”ã€æŸ¥çœ‹æ­£åœ¨å®ˆå€™çš„è¿›ç¨‹

supervisorctl
å…­ã€åœæ­¢æŸä¸€è¿›ç¨‹ (program_name=ä½ é…ç½®ä¸­å†™çš„ç¨‹åºåç§°)

pervisorctl stop program_name
ä¸ƒã€é‡å¯æŸä¸€è¿›ç¨‹ (program_name=ä½ é…ç½®ä¸­å†™çš„ç¨‹åºåç§°)

supervisorctl restart program_name
å…«ã€åœæ­¢å…¨éƒ¨è¿›ç¨‹

supervisorctl stop all
æ³¨æ„ï¼šæ˜¾ç¤ºç”¨stopåœæ­¢æ‰çš„è¿›ç¨‹ï¼Œç”¨reloadæˆ–è€…updateéƒ½ä¸ä¼šè‡ªåŠ¨é‡å¯ã€‚


supervisoré…ç½®è¯¦è§£ï¼ˆè½¬ï¼‰
åŸæ–‡ï¼šhttp://lixcto.blog.51cto.com/4834175/1539136

    æœ‰é˜µå­æ²¡å†™åšå®¢äº†ï¼Œè¿™æ®µæ—¶é—´ä¸€ç›´åœ¨ç ”ç©¶python djangoæ¡†æ¶å’Œå‰ç«¯ç›¸å…³çš„ä¸œè¥¿ã€‚æ¥¼ä¸»å­¦é€šä¿¡çš„ï¼Œå¯¹webè¿™ä¸€å—å•¥ä¹Ÿä¸æ‡‚ï¼Œå­¦äº†ä¸€ä¸ªç¤¼æ‹œdjangoï¼Œæ¥ç€å­¦äº†2ä¸ªç¤¼æ‹œå‰ç«¯ï¼Œæ„Ÿè§‰è¿˜æ˜¯åšä¸å‡ºæ¥ä¸€ä¸ªå¥½çœ‹çš„é¡µé¢ã€‚å‘¨æœ«å»äº†è¶Ÿä¸Šæµ·ï¼Œè¹­å¤§ç¥çš„è®²è¯¾ï¼Œå­¦ä¼šäº†å¥—ç”¨bootstrapæ¡†æ¶å’Œheighchartsï¼Œé¡µé¢ä¸Šä¹Ÿç»ˆäºå‡ºæ¥èƒ½çœ‹çš„ä¸œè¥¿äº†ï¼Œä¹Ÿç®—æ˜¯åœ¨webå¼€å‘æ–¹é¢è¿ˆå‡ºäº†é˜¶æ®µæ€§çš„ä¸€æ­¥ã€‚

    è¿™ä¸¤å¤©å…¬å¸ç»ˆäºæ´¾ä»»åŠ¡ç»™æˆ‘åšäº†ï¼Œä¸å®¹æ˜“äº†å•Šï¼Œæ¥äº†äº”ä¸ªæœˆäº†ï¼Œç»ˆäºæœ‰æ´»å¹²äº†ã€‚è™½ç„¶åªç»™äº†å†…æµ‹æ¸¸æˆæœåŠ¡å™¨ä¸Šçš„æƒé™ï¼Œä¸è¿‡ä¹Ÿå¤Ÿæ¥¼ä¸»æ£è…¾ä¸€æ®µæ—¶é—´äº†ã€‚

    è¿™ä¸¤å¤©å¹²çš„æ´»ï¼Œæ˜¯è®©æ¥¼ä¸»å†™ä¸€ä¸ªsupervisorçš„listenerï¼Œç”¨æ¥ç›‘æ§supervisoræ‰€ç®¡ç†å­è¿›ç¨‹çš„çŠ¶æ€ï¼Œå½“å­è¿›ç¨‹å¼‚å¸¸é€€å‡ºæ—¶ï¼Œæ¥¼ä¸»å†™çš„è¿™ä¸ªlistenerå°†ä¼šè§¦å‘æŠ¥è­¦ã€‚åœ¨è¿™é‡Œæ€»ç»“ä¸‹supervisorçš„çŸ¥è¯†å§

    å…ˆè¯´è¯´supervisoræ˜¯å¹²ä»€ä¹ˆçš„å§ï¼Ÿ

supervisorè¿™ä¸œè¥¿ï¼Œå…¶å®å°±æ˜¯ç”¨æ¥ç®¡ç†è¿›ç¨‹çš„ã€‚å’±ä»¬ä¸ºä»€ä¹ˆè¦ç”¨supervisorå‘¢ï¼Ÿå› ä¸ºï¼Œç›¸å¯¹äºæˆ‘ä»¬linuxä¼ ç»Ÿçš„è¿›ç¨‹ç®¡ç†æ–¹å¼æ¥è¯´ï¼Œå®ƒæœ‰å¾ˆå¤šçš„ä¼˜åŠ¿ï¼Œè¦ä¸ç„¶å’±ä»¬ä¹Ÿä¸ä¼šé—²ç€æ²¡äº‹å»ç”¨supervisoräº†ã€‚

OKï¼Œä¸‹é¢æ¥çœ‹çœ‹supervisoræœ‰å“ªäº›å¥½å¤„å§ã€‚

ç®€å•

ä¸ºå•¥ç®€å•å‘¢ï¼Ÿå› ä¸ºå’±ä»¬é€šå¸¸ç®¡ç†linuxè¿›ç¨‹çš„æ—¶å€™ï¼Œä¸€èˆ¬æ¥è¯´éƒ½éœ€è¦è‡ªå·±ç¼–å†™ä¸€ä¸ªèƒ½å¤Ÿå®ç°è¿›ç¨‹start/stop/restart/reloadåŠŸèƒ½çš„è„šæœ¬ï¼Œç„¶åä¸¢åˆ°/etc/init.d/ä¸‹é¢ã€‚è¿™ä¹ˆåšæœ‰å¾ˆå¤šä¸å¥½çš„åœ°æ–¹ï¼Œç¬¬ä¸€æˆ‘ä»¬è¦ç¼–å†™è¿™ä¸ªè„šæœ¬ï¼Œè¿™å°±å¾ˆè€—æ—¶è€—åŠ›äº†ã€‚ç¬¬äºŒï¼Œå½“è¿™ä¸ªè¿›ç¨‹æŒ‚æ‰çš„æ—¶å€™ï¼Œlinuxä¸ä¼šè‡ªåŠ¨é‡å¯å®ƒçš„ï¼Œæƒ³è¦è‡ªåŠ¨é‡å¯çš„è¯ï¼Œæˆ‘ä»¬è¿˜è¦è‡ªå·±å†™ä¸€ä¸ªç›‘æ§é‡å¯è„šæœ¬ã€‚è€Œï¼Œsupervisoråˆ™å¯ä»¥å®Œç¾çš„è§£å†³è¿™äº›é—®é¢˜ã€‚å¥½ï¼Œæ€ä¹ˆè§£å†³çš„å‘¢ï¼Œå…¶å®supervisorç®¡ç†è¿›ç¨‹ï¼Œå°±æ˜¯é€šè¿‡fork/execçš„æ–¹å¼æŠŠè¿™äº›è¢«ç®¡ç†çš„è¿›ç¨‹ï¼Œå½“ä½œsupervisorçš„å­è¿›ç¨‹æ¥å¯åŠ¨ã€‚è¿™æ ·çš„è¯ï¼Œæˆ‘ä»¬åªè¦åœ¨supervisorçš„é…ç½®æ–‡ä»¶ä¸­ï¼ŒæŠŠè¦ç®¡ç†çš„è¿›ç¨‹çš„å¯æ‰§è¡Œæ–‡ä»¶çš„è·¯å¾„å†™è¿›å»å°±OKäº†ã€‚è¿™æ ·å°±çœä¸‹äº†æˆ‘ä»¬å¦‚åŒlinuxç®¡ç†è¿›ç¨‹çš„æ—¶å€™ï¼Œè‡ªå·±å†™æ§åˆ¶è„šæœ¬çš„éº»çƒ¦äº†ã€‚ç¬¬äºŒï¼Œè¢«ç®¡ç†è¿›ç¨‹ä½œä¸ºsupervisorçš„å­è¿›ç¨‹ï¼Œå½“å­è¿›ç¨‹æŒ‚æ‰çš„æ—¶å€™ï¼Œçˆ¶è¿›ç¨‹å¯ä»¥å‡†ç¡®è·å–å­è¿›ç¨‹æŒ‚æ‰çš„ä¿¡æ¯çš„ï¼Œæ‰€ä»¥å½“ç„¶ä¹Ÿå°±å¯ä»¥å¯¹æŒ‚æ‰çš„å­è¿›ç¨‹è¿›è¡Œè‡ªåŠ¨é‡å¯äº†ï¼Œå½“ç„¶é‡å¯è¿˜æ˜¯ä¸é‡å¯ï¼Œä¹Ÿè¦çœ‹ä½ çš„é…ç½®æ–‡ä»¶é‡Œé¢æœ‰æœ¨æœ‰è®¾ç½®autostart=trueäº†ï¼Œè¿™æ˜¯åè¯ã€‚

ç²¾ç¡®

ä¸ºå•¥è¯´ç²¾ç¡®å‘¢ï¼Ÿå› ä¸ºlinuxå¯¹è¿›ç¨‹çŠ¶æ€çš„åé¦ˆï¼Œæœ‰æ—¶å€™ä¸å¤ªå‡†ç¡®ã€‚ä¸ºå•¥ä¸å‡†ç¡®ï¼Ÿè¿™ä¸ªæ¥¼ä¸»ä¹Ÿä¸çŸ¥é“å•Šï¼Œå®˜æ–¹æ–‡æ¡£æ˜¯è¿™ä¹ˆè¯´çš„ï¼ŒçŸ¥é“çš„å‘Šè¯‰æ¥¼ä¸»ä¸€ä¸‹å§ï¼Œæ„Ÿæ¿€ä¸å°½ã€‚è€Œsupervisorç›‘æ§å­è¿›ç¨‹ï¼Œå¾—åˆ°çš„å­è¿›ç¨‹çŠ¶æ€æ— ç–‘æ˜¯å‡†ç¡®çš„ã€‚

è¿›ç¨‹ç»„

supervisorå¯ä»¥å¯¹è¿›ç¨‹ç»„ç»Ÿä¸€ç®¡ç†ï¼Œä¹Ÿå°±æ˜¯è¯´å’±ä»¬å¯ä»¥æŠŠéœ€è¦ç®¡ç†çš„è¿›ç¨‹å†™åˆ°ä¸€ä¸ªç»„é‡Œé¢ï¼Œç„¶åæˆ‘ä»¬æŠŠè¿™ä¸ªç»„ä½œä¸ºä¸€ä¸ªå¯¹è±¡è¿›è¡Œç®¡ç†ï¼Œå¦‚å¯åŠ¨ï¼Œåœæ­¢ï¼Œé‡å¯ç­‰ç­‰æ“ä½œã€‚è€Œlinuxç³»ç»Ÿåˆ™æ˜¯æ²¡æœ‰è¿™ç§åŠŸèƒ½çš„ï¼Œæˆ‘ä»¬æƒ³è¦åœæ­¢ä¸€ä¸ªè¿›ç¨‹ï¼Œåªèƒ½ä¸€ä¸ªä¸€ä¸ªçš„å»åœæ­¢ï¼Œè¦ä¹ˆå°±è‡ªå·±å†™ä¸ªè„šæœ¬å»æ‰¹é‡åœæ­¢ã€‚

é›†ä¸­å¼ç®¡ç†

supervisorç®¡ç†çš„è¿›ç¨‹ï¼Œè¿›ç¨‹ç»„ä¿¡æ¯ï¼Œå…¨éƒ¨éƒ½å†™åœ¨ä¸€ä¸ªiniæ ¼å¼çš„æ–‡ä»¶é‡Œå°±OKäº†ã€‚è€Œä¸”ï¼Œæˆ‘ä»¬ç®¡ç†supervisorçš„æ—¶å€™çš„å¯ä»¥åœ¨æœ¬åœ°è¿›è¡Œç®¡ç†ï¼Œä¹Ÿå¯ä»¥è¿œç¨‹ç®¡ç†ï¼Œè€Œä¸”supervisoræä¾›äº†ä¸€ä¸ªwebç•Œé¢ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨webç•Œé¢ä¸Šç›‘æ§ï¼Œç®¡ç†è¿›ç¨‹ã€‚ å½“ç„¶äº†ï¼Œæœ¬åœ°ï¼Œè¿œç¨‹å’Œwebç®¡ç†çš„æ—¶å€™ï¼Œéœ€è¦è°ƒç”¨supervisorçš„xml_rpcæ¥å£ï¼Œè¿™ä¸ªä¹Ÿæ˜¯åè¯ã€‚

æœ‰æ•ˆæ€§

å½“supervisorçš„å­è¿›ç¨‹æŒ‚æ‰çš„æ—¶å€™ï¼Œæ“ä½œç³»ç»Ÿä¼šç›´æ¥ç»™supervisorå‘ä¿¡å·ã€‚è€Œå…¶ä»–çš„ä¸€äº›ç±»ä¼¼supervisorçš„å·¥å…·ï¼Œåˆ™æ˜¯é€šè¿‡è¿›ç¨‹çš„pidæ–‡ä»¶ï¼Œæ¥å‘é€ä¿¡å·çš„ï¼Œç„¶åå®šæœŸè½®è¯¢æ¥é‡å¯å¤±è´¥çš„è¿›ç¨‹ã€‚æ˜¾ç„¶supervisoræ›´åŠ é«˜æ•ˆã€‚ã€‚ã€‚è‡³äºæ˜¯å“ªäº›ç±»ä¼¼supervisorå·¥å…·ï¼Œè¿™ä¸ªæ¥¼ä¸»å°±ä¸å¤ªæ¸…æ¥šäº†ï¼Œæ¥¼ä¸»è¿˜å¬è¯´è¿‡god,directorï¼Œä½†æ˜¯æ²¡ç”¨è¿‡ã€‚æœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥ç©ç©

å¯æ‰©å±•æ€§

supervisoræ˜¯ä¸ªå¼€æºè½¯ä»¶ï¼Œç‰›é€¼ç‚¹çš„ï¼Œå¯ä»¥ç›´æ¥å»æ”¹è½¯ä»¶ã€‚ä¸è¿‡å’±ä»¬å¤§å¤šæ•°äººè¿˜æ˜¯è€è€å®å®ç ”ç©¶supervisotæä¾›çš„æ¥å£å§ï¼Œsupervisorä¸»è¦æä¾›äº†ä¸¤ä¸ªå¯æ‰©å±•çš„åŠŸèƒ½ã€‚ä¸€ä¸ªæ˜¯eventæœºåˆ¶ï¼Œè¿™ä¸ªå°±æ˜¯æ¥¼ä¸»è¿™ä¸¤å¤©å¹²çš„æ´»è¦ç”¨åˆ°çš„ä¸œè¥¿ã€‚å†ä¸€ä¸ªæ˜¯xml_rpc,supervisorçš„webç®¡ç†ç«¯å’Œè¿œç¨‹è°ƒç”¨çš„æ—¶å€™ï¼Œå°±è¦ç”¨åˆ°å®ƒäº†ã€‚

æƒé™

å¤§ä¼™éƒ½çŸ¥é“linuxçš„è¿›ç¨‹ï¼Œç‰¹åˆ«æ˜¯ä¾¦å¬åœ¨1024ç«¯å£ä¹‹ä¸‹çš„è¿›ç¨‹ï¼Œä¸€èˆ¬ç”¨æˆ·å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ˜¯ä¸èƒ½å¯¹å…¶è¿›è¡Œæ§åˆ¶çš„ã€‚æƒ³è¦æ§åˆ¶çš„è¯ï¼Œå¿…é¡»è¦æœ‰rootæƒé™ã€‚è€Œsupervisoræä¾›äº†ä¸€ä¸ªåŠŸèƒ½ï¼Œå¯ä»¥ä¸ºsupervisordæˆ–è€…æ¯ä¸ªå­è¿›ç¨‹ï¼Œè®¾ç½®ä¸€ä¸ªérootçš„userï¼Œè¿™ä¸ªuserå°±å¯ä»¥ç®¡ç†å®ƒå¯¹åº”çš„è¿›ç¨‹äº†ã€‚

ä¸è¿‡è¿™åŠŸèƒ½ï¼Œç”¨ä¸ç”¨å°±çœ‹å¤§ä¼™è‡ªå·±çš„ç¯å¢ƒäº†

è¿˜æœ‰ä¸€äº›ä»€ä¹ˆå…¼å®¹æ€§ï¼Œç¨³å®šæ€§ï¼Œæ„Ÿè§‰ç”¨å¤„ä¸å¤§ï¼Œå°±ä¸æ‰¯äº†ã€‚

å®‰è£…

å®‰è£…æ–¹æ³•å¾ˆç®€å•ã€‚æ¥¼ä¸»çš„ç³»ç»Ÿæ˜¯debianï¼Œå…¶å®ƒç³»ç»Ÿå°±ä¸è¯´äº†

aptitude -y install python-setuptools
easy-install supervisoræˆ–è€…pip install supervisor
ç”Ÿæˆé…ç½®æ–‡ä»¶

å®‰è£…å¥½supervisorä¹‹åï¼Œé»˜è®¤æ˜¯æ²¡æœ‰ç”Ÿæˆé…ç½®æ–‡ä»¶çš„ã€‚å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤ç”Ÿæˆé…ç½®æ–‡ä»¶

echo_supervisord_conf > /etc/supervisord.conf
æˆ‘ä»¬é€šå¸¸æ˜¯æŠŠé…ç½®æ–‡ä»¶æ”¾åˆ°/etc/ä¸‹é¢ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æ”¾åˆ°ä»»æ„è·¯å¾„ä¸‹é¢ã€‚

å¯åŠ¨

ä»¥ä¸‹å¯åŠ¨é¡ºåºç”±ä¸Šåˆ°ä¸‹ä¼˜å…ˆçº§ï¼Œä¾æ¬¡é€’å‡

supervisord                                   #é»˜è®¤å»æ‰¾$CWD/supervisord.confï¼Œä¹Ÿå°±æ˜¯å½“å‰ç›®å½•
supervisord                                   #é»˜è®¤$CWD/etc/supervisord.confï¼Œä¹Ÿå°±å½“å‰ç›®å½•ä¸‹çš„etcç›®å½•
supervisord                                   #é»˜è®¤å»æ‰¾/etc/supervisord.confçš„é…ç½®æ–‡ä»¶
supervisord -c /home/supervisord.conf         #åˆ°æŒ‡å®šè·¯å¾„ä¸‹å»æ‰¾é…ç½®æ–‡ä»¶
supervisorç»„ä»¶

supervisord

supervisordæ˜¯supervisorçš„æœåŠ¡ç«¯ç¨‹åºã€‚

å¹²çš„æ´»ï¼šå¯åŠ¨supervisorç¨‹åºè‡ªèº«ï¼Œå¯åŠ¨supervisorç®¡ç†çš„å­è¿›ç¨‹ï¼Œå“åº”æ¥è‡ªclientsçš„è¯·æ±‚ï¼Œé‡å¯é—ªé€€æˆ–å¼‚å¸¸é€€å‡ºçš„å­è¿›ç¨‹ï¼ŒæŠŠå­è¿›ç¨‹çš„stderræˆ–stdoutè®°å½•åˆ°æ—¥å¿—æ–‡ä»¶ä¸­ï¼Œç”Ÿæˆå’Œå¤„ç†Event

supervisorctl

è¿™ä¸œè¥¿è¿˜æ˜¯æœ‰ç‚¹ç”¨çš„ï¼Œå¦‚æœè¯´supervisordæ˜¯supervisorçš„æœåŠ¡ç«¯ç¨‹åºï¼Œé‚£ä¹ˆsupervisorctlå°±æ˜¯clientç«¯ç¨‹åºäº†ã€‚supervisorctlæœ‰ä¸€ä¸ªç±»å‹shellçš„å‘½ä»¤è¡Œç•Œé¢ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨å®ƒæ¥æŸ¥çœ‹å­è¿›ç¨‹çŠ¶æ€ï¼Œå¯åŠ¨/åœæ­¢/é‡å¯å­è¿›ç¨‹ï¼Œè·å–runningå­è¿›ç¨‹çš„åˆ—è¡¨ç­‰ç­‰ã€‚ã€‚ã€‚æœ€ç‰›é€¼çš„ä¸€ç‚¹æ˜¯ï¼Œsupervisorctlä¸ä»…å¯ä»¥è¿æ¥åˆ°æœ¬æœºä¸Šçš„supervisordï¼Œè¿˜å¯ä»¥è¿æ¥åˆ°è¿œç¨‹çš„supervisordï¼Œå½“ç„¶åœ¨æœ¬æœºä¸Šé¢æ˜¯é€šè¿‡UNIX socketè¿æ¥çš„ï¼Œè¿œç¨‹æ˜¯é€šè¿‡TCP socketè¿æ¥çš„ã€‚supervisorctlå’Œsupervisordä¹‹é—´çš„é€šä¿¡ï¼Œæ˜¯é€šè¿‡xml_rpcå®Œæˆçš„ã€‚    ç›¸åº”çš„é…ç½®åœ¨[supervisorctl]å—é‡Œé¢

Web Server

Web Serverä¸»è¦å¯ä»¥åœ¨ç•Œé¢ä¸Šç®¡ç†è¿›ç¨‹ï¼ŒWeb Serverå…¶å®æ˜¯é€šè¿‡XML_RPCæ¥å®ç°çš„ï¼Œå¯ä»¥å‘supervisorè¯·æ±‚æ•°æ®ï¼Œä¹Ÿå¯ä»¥æ§åˆ¶supervisoråŠå­è¿›ç¨‹ã€‚é…ç½®åœ¨[inet_http_server]å—é‡Œé¢

XML_RPCæ¥å£

è¿™ä¸ªå°±æ˜¯è¿œç¨‹è°ƒç”¨çš„ï¼Œä¸Šé¢çš„supervisorctlå’ŒWeb Serverå°±æ˜¯å®ƒå¼„çš„

é…ç½®æ–‡ä»¶è¯¦è§£

 

[unix_http_server]            
file=/tmp/supervisor.sock   ; socketæ–‡ä»¶çš„è·¯å¾„ï¼Œsupervisorctlç”¨XML_RPCå’Œsupervisordé€šä¿¡å°±æ˜¯é€šè¿‡å®ƒè¿›è¡Œ
                              çš„ã€‚å¦‚æœä¸è®¾ç½®çš„è¯ï¼Œsupervisorctlä¹Ÿå°±ä¸èƒ½ç”¨äº†  
                              ä¸è®¾ç½®çš„è¯ï¼Œé»˜è®¤ä¸ºnoneã€‚ éå¿…é¡»è®¾ç½®        
;chmod=0700                 ; è¿™ä¸ªç®€å•ï¼Œå°±æ˜¯ä¿®æ”¹ä¸Šé¢çš„é‚£ä¸ªsocketæ–‡ä»¶çš„æƒé™ä¸º0700
                              ä¸è®¾ç½®çš„è¯ï¼Œé»˜è®¤ä¸º0700ã€‚ éå¿…é¡»è®¾ç½®
;chown=nobody:nogroup       ; è¿™ä¸ªä¸€æ ·ï¼Œä¿®æ”¹ä¸Šé¢çš„é‚£ä¸ªsocketæ–‡ä»¶çš„å±ç»„ä¸ºuser.group
                              ä¸è®¾ç½®çš„è¯ï¼Œé»˜è®¤ä¸ºå¯åŠ¨supervisordè¿›ç¨‹çš„ç”¨æˆ·åŠå±ç»„ã€‚éå¿…é¡»è®¾ç½®
;username=user              ; ä½¿ç”¨supervisorctlè¿æ¥çš„æ—¶å€™ï¼Œè®¤è¯çš„ç”¨æˆ·
                               ä¸è®¾ç½®çš„è¯ï¼Œé»˜è®¤ä¸ºä¸éœ€è¦ç”¨æˆ·ã€‚ éå¿…é¡»è®¾ç½®
;password=123               ; å’Œä¸Šé¢çš„ç”¨æˆ·åå¯¹åº”çš„å¯†ç ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨æ˜ç ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨SHAåŠ å¯†
                              å¦‚ï¼š{SHA}82ab876d1387bfafe46cc1c8a2ef074eae50cb1d
                              é»˜è®¤ä¸è®¾ç½®ã€‚ã€‚ã€‚éå¿…é¡»è®¾ç½®

;[inet_http_server]         ; ä¾¦å¬åœ¨TCPä¸Šçš„socketï¼ŒWeb Serverå’Œè¿œç¨‹çš„supervisorctléƒ½è¦ç”¨åˆ°ä»–
                              ä¸è®¾ç½®çš„è¯ï¼Œé»˜è®¤ä¸ºä¸å¼€å¯ã€‚éå¿…é¡»è®¾ç½®
;port=127.0.0.1:9001        ; è¿™ä¸ªæ˜¯ä¾¦å¬çš„IPå’Œç«¯å£ï¼Œä¾¦å¬æ‰€æœ‰IPç”¨ :9001æˆ–*:9001ã€‚
                              è¿™ä¸ªå¿…é¡»è®¾ç½®ï¼Œåªè¦ä¸Šé¢çš„[inet_http_server]å¼€å¯äº†ï¼Œå°±å¿…é¡»è®¾ç½®å®ƒ
;username=user              ; è¿™ä¸ªå’Œä¸Šé¢çš„uinx_http_serverä¸€ä¸ªæ ·ã€‚éå¿…é¡»è®¾ç½®
;password=123               ; è¿™ä¸ªä¹Ÿä¸€ä¸ªæ ·ã€‚éå¿…é¡»è®¾ç½®

[supervisord]                ;è¿™ä¸ªä¸»è¦æ˜¯å®šä¹‰supervisordè¿™ä¸ªæœåŠ¡ç«¯è¿›ç¨‹çš„ä¸€äº›å‚æ•°çš„
                              è¿™ä¸ªå¿…é¡»è®¾ç½®ï¼Œä¸è®¾ç½®ï¼Œsupervisorå°±ä¸ç”¨å¹²æ´»äº†
logfile=/tmp/supervisord.log ; è¿™ä¸ªæ˜¯supervisordè¿™ä¸ªä¸»è¿›ç¨‹çš„æ—¥å¿—è·¯å¾„ï¼Œæ³¨æ„å’Œå­è¿›ç¨‹çš„æ—¥å¿—ä¸æ­å˜ã€‚
                               é»˜è®¤è·¯å¾„$CWD/supervisord.logï¼Œ$CWDæ˜¯å½“å‰ç›®å½•ã€‚ã€‚éå¿…é¡»è®¾ç½®
logfile_maxbytes=50MB        ; è¿™ä¸ªæ˜¯ä¸Šé¢é‚£ä¸ªæ—¥å¿—æ–‡ä»¶çš„æœ€å¤§çš„å¤§å°ï¼Œå½“è¶…è¿‡50Mçš„æ—¶å€™ï¼Œä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„æ—¥ 
                               å¿—æ–‡ä»¶ã€‚å½“è®¾ç½®ä¸º0æ—¶ï¼Œè¡¨ç¤ºä¸é™åˆ¶æ–‡ä»¶å¤§å°
                               é»˜è®¤å€¼æ˜¯50Mï¼Œéå¿…é¡»è®¾ç½®ã€‚              
logfile_backups=10           ; æ—¥å¿—æ–‡ä»¶ä¿æŒçš„æ•°é‡ï¼Œsupervisoråœ¨å¯åŠ¨ç¨‹åºæ—¶ï¼Œä¼šè‡ªåŠ¨åˆ›å»º10ä¸ªbuckupæ–‡ä»¶ï¼Œç”¨äºlog rotate
                               å½“è®¾ç½®ä¸º0æ—¶ï¼Œè¡¨ç¤ºä¸é™åˆ¶æ–‡ä»¶çš„æ•°é‡ã€‚
                               é»˜è®¤æƒ…å†µä¸‹ä¸º10ã€‚ã€‚ã€‚éå¿…é¡»è®¾ç½®
loglevel=info                ; æ—¥å¿—çº§åˆ«ï¼Œæœ‰critical, error, warn, info, debug, trace, or blatherç­‰
                               é»˜è®¤ä¸ºinfoã€‚ã€‚ã€‚éå¿…é¡»è®¾ç½®é¡¹
pidfile=/tmp/supervisord.pid ; supervisordçš„pidæ–‡ä»¶è·¯å¾„ã€‚
                               é»˜è®¤ä¸º$CWD/supervisord.pidã€‚ã€‚ã€‚éå¿…é¡»è®¾ç½®
nodaemon=false               ; å¦‚æœæ˜¯trueï¼Œsupervisordè¿›ç¨‹å°†åœ¨å‰å°è¿è¡Œ
                               é»˜è®¤ä¸ºfalseï¼Œä¹Ÿå°±æ˜¯åå°ä»¥å®ˆæŠ¤è¿›ç¨‹è¿è¡Œã€‚ã€‚ã€‚éå¿…é¡»è®¾ç½®
minfds=1024                  ; è¿™ä¸ªæ˜¯æœ€å°‘ç³»ç»Ÿç©ºé—²çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œä½äºè¿™ä¸ªå€¼supervisorå°†ä¸ä¼šå¯åŠ¨ã€‚
                               ç³»ç»Ÿçš„æ–‡ä»¶æè¿°ç¬¦åœ¨è¿™é‡Œè®¾ç½®cat /proc/sys/fs/file-max
                               é»˜è®¤æƒ…å†µä¸‹ä¸º1024ã€‚ã€‚ã€‚éå¿…é¡»è®¾ç½®
minprocs=200                 ; æœ€å°å¯ç”¨çš„è¿›ç¨‹æè¿°ç¬¦ï¼Œä½äºè¿™ä¸ªå€¼supervisorä¹Ÿå°†ä¸ä¼šæ­£å¸¸å¯åŠ¨ã€‚
                              ulimit  -uè¿™ä¸ªå‘½ä»¤ï¼Œå¯ä»¥æŸ¥çœ‹linuxä¸‹é¢ç”¨æˆ·çš„æœ€å¤§è¿›ç¨‹æ•°
                              é»˜è®¤ä¸º200ã€‚ã€‚ã€‚éå¿…é¡»è®¾ç½®
;umask=022                   ; è¿›ç¨‹åˆ›å»ºæ–‡ä»¶çš„æ©ç 
                               é»˜è®¤ä¸º022ã€‚ã€‚éå¿…é¡»è®¾ç½®é¡¹
;user=chrism                 ; è¿™ä¸ªå‚æ•°å¯ä»¥è®¾ç½®ä¸€ä¸ªérootç”¨æˆ·ï¼Œå½“æˆ‘ä»¬ä»¥rootç”¨æˆ·å¯åŠ¨supervisordä¹‹åã€‚
                               æˆ‘è¿™é‡Œé¢è®¾ç½®çš„è¿™ä¸ªç”¨æˆ·ï¼Œä¹Ÿå¯ä»¥å¯¹supervisordè¿›è¡Œç®¡ç†
                               é»˜è®¤æƒ…å†µæ˜¯ä¸è®¾ç½®ã€‚ã€‚ã€‚éå¿…é¡»è®¾ç½®é¡¹
;identifier=supervisor       ; è¿™ä¸ªå‚æ•°æ˜¯supervisordçš„æ ‡è¯†ç¬¦ï¼Œä¸»è¦æ˜¯ç»™XML_RPCç”¨çš„ã€‚å½“ä½ æœ‰å¤šä¸ª
                               supervisorçš„æ—¶å€™ï¼Œè€Œä¸”æƒ³è°ƒç”¨XML_RPCç»Ÿä¸€ç®¡ç†ï¼Œå°±éœ€è¦ä¸ºæ¯ä¸ª
                               supervisorè®¾ç½®ä¸åŒçš„æ ‡è¯†ç¬¦äº†
                               é»˜è®¤æ˜¯supervisordã€‚ã€‚ã€‚éå¿…éœ€è®¾ç½®
;directory=/tmp              ; è¿™ä¸ªå‚æ•°æ˜¯å½“supervisordä½œä¸ºå®ˆæŠ¤è¿›ç¨‹è¿è¡Œçš„æ—¶å€™ï¼Œè®¾ç½®è¿™ä¸ªå‚æ•°çš„è¯ï¼Œå¯åŠ¨
                               supervisordè¿›ç¨‹ä¹‹å‰ï¼Œä¼šå…ˆåˆ‡æ¢åˆ°è¿™ä¸ªç›®å½•
                               é»˜è®¤ä¸è®¾ç½®ã€‚ã€‚ã€‚éå¿…é¡»è®¾ç½®
;nocleanup=true              ; è¿™ä¸ªå‚æ•°å½“ä¸ºfalseçš„æ—¶å€™ï¼Œä¼šåœ¨supervisordè¿›ç¨‹å¯åŠ¨çš„æ—¶å€™ï¼ŒæŠŠä»¥å‰å­è¿›ç¨‹
                               äº§ç”Ÿçš„æ—¥å¿—æ–‡ä»¶(è·¯å¾„ä¸ºAUTOçš„æƒ…å†µä¸‹)æ¸…é™¤æ‰ã€‚æœ‰æ—¶å€™å’±ä»¬æƒ³è¦çœ‹å†å²æ—¥å¿—ï¼Œå½“ 
                               ç„¶ä¸æƒ³æ—¥å¿—è¢«æ¸…é™¤äº†ã€‚æ‰€ä»¥å¯ä»¥è®¾ç½®ä¸ºtrue
                               é»˜è®¤æ˜¯falseï¼Œæœ‰è°ƒè¯•éœ€æ±‚çš„åŒå­¦å¯ä»¥è®¾ç½®ä¸ºtrueã€‚ã€‚ã€‚éå¿…é¡»è®¾ç½®
;childlogdir=/tmp            ; å½“å­è¿›ç¨‹æ—¥å¿—è·¯å¾„ä¸ºAUTOçš„æ—¶å€™ï¼Œå­è¿›ç¨‹æ—¥å¿—æ–‡ä»¶çš„å­˜æ”¾è·¯å¾„ã€‚
                               é»˜è®¤è·¯å¾„æ˜¯è¿™ä¸ªä¸œè¥¿ï¼Œæ‰§è¡Œä¸‹é¢çš„è¿™ä¸ªå‘½ä»¤çœ‹çœ‹å°±OKäº†ï¼Œå¤„ç†çš„ä¸œè¥¿å°±é»˜è®¤è·¯å¾„
                               python -c "import tempfile;print tempfile.gettempdir()"
                               éå¿…é¡»è®¾ç½®
;environment=KEY="value"     ; è¿™ä¸ªæ˜¯ç”¨æ¥è®¾ç½®ç¯å¢ƒå˜é‡çš„ï¼Œsupervisordåœ¨linuxä¸­å¯åŠ¨é»˜è®¤ç»§æ‰¿äº†linuxçš„
                               ç¯å¢ƒå˜é‡ï¼Œåœ¨è¿™é‡Œå¯ä»¥è®¾ç½®supervisordè¿›ç¨‹ç‰¹æœ‰çš„å…¶ä»–ç¯å¢ƒå˜é‡ã€‚
                               supervisordå¯åŠ¨å­è¿›ç¨‹æ—¶ï¼Œå­è¿›ç¨‹ä¼šæ‹·è´çˆ¶è¿›ç¨‹çš„å†…å­˜ç©ºé—´å†…å®¹ã€‚ æ‰€ä»¥è®¾ç½®çš„
                               è¿™äº›ç¯å¢ƒå˜é‡ä¹Ÿä¼šè¢«å­è¿›ç¨‹ç»§æ‰¿ã€‚
                               å°ä¾‹å­ï¼šenvironment=name="haha",age="hehe"
                               é»˜è®¤ä¸ºä¸è®¾ç½®ã€‚ã€‚ã€‚éå¿…é¡»è®¾ç½®
;strip_ansi=false            ; è¿™ä¸ªé€‰é¡¹å¦‚æœè®¾ç½®ä¸ºtrueï¼Œä¼šæ¸…é™¤å­è¿›ç¨‹æ—¥å¿—ä¸­çš„æ‰€æœ‰ANSI åºåˆ—ã€‚ä»€ä¹ˆæ˜¯ANSI
                               åºåˆ—å‘¢ï¼Ÿå°±æ˜¯æˆ‘ä»¬çš„\n,\tè¿™äº›ä¸œè¥¿ã€‚
                               é»˜è®¤ä¸ºfalseã€‚ã€‚ã€‚éå¿…é¡»è®¾ç½®

; the below section must remain in the config file for RPC
; (supervisorctl/web interface) to work, additional interfaces may be
; added by defining them in separate rpcinterface: sections
[rpcinterface:supervisor]    ;è¿™ä¸ªé€‰é¡¹æ˜¯ç»™XML_RPCç”¨çš„ï¼Œå½“ç„¶ä½ å¦‚æœæƒ³ä½¿ç”¨supervisordæˆ–è€…web server è¿™ 
                              ä¸ªé€‰é¡¹å¿…é¡»è¦å¼€å¯çš„
supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface 

[supervisorctl]              ;è¿™ä¸ªä¸»è¦æ˜¯é’ˆå¯¹supervisorctlçš„ä¸€äº›é…ç½®  
serverurl=unix:///tmp/supervisor.sock ; è¿™ä¸ªæ˜¯supervisorctlæœ¬åœ°è¿æ¥supervisordçš„æ—¶å€™ï¼Œæœ¬åœ°UNIX socket
                                        è·¯å¾„ï¼Œæ³¨æ„è¿™ä¸ªæ˜¯å’Œå‰é¢çš„[unix_http_server]å¯¹åº”çš„
                                        é»˜è®¤å€¼å°±æ˜¯unix:///tmp/supervisor.sockã€‚ã€‚éå¿…é¡»è®¾ç½®
;serverurl=http://127.0.0.1:9001 ; è¿™ä¸ªæ˜¯supervisorctlè¿œç¨‹è¿æ¥supervisordçš„æ—¶å€™ï¼Œç”¨åˆ°çš„TCP socketè·¯å¾„
                                   æ³¨æ„è¿™ä¸ªå’Œå‰é¢çš„[inet_http_server]å¯¹åº”
                                   é»˜è®¤å°±æ˜¯http://127.0.0.1:9001ã€‚ã€‚ã€‚éå¿…é¡»é¡¹
                               
;username=chris              ; ç”¨æˆ·å
                               é»˜è®¤ç©ºã€‚ã€‚éå¿…é¡»è®¾ç½®
;password=123                ; å¯†ç 
                              é»˜è®¤ç©ºã€‚ã€‚éå¿…é¡»è®¾ç½®
;prompt=mysupervisor         ; è¾“å…¥ç”¨æˆ·åå¯†ç æ—¶å€™çš„æç¤ºç¬¦
                               é»˜è®¤supervisorã€‚ã€‚éå¿…é¡»è®¾ç½®
;history_file=~/.sc_history  ; è¿™ä¸ªå‚æ•°å’Œshellä¸­çš„historyç±»ä¼¼ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸Šä¸‹é”®æ¥æŸ¥æ‰¾å‰é¢æ‰§è¡Œè¿‡çš„å‘½ä»¤
                               é»˜è®¤æ˜¯no fileçš„ã€‚ã€‚æ‰€ä»¥æˆ‘ä»¬æƒ³è¦æœ‰è¿™ç§åŠŸèƒ½ï¼Œå¿…é¡»æŒ‡å®šä¸€ä¸ªæ–‡ä»¶ã€‚ã€‚ã€‚é
                               å¿…é¡»è®¾ç½®

; The below sample program section shows all possible program subsection values,
; create one or more 'real' program: sections to be able to control them under
; supervisor.

;[program:theprogramname]      ;è¿™ä¸ªå°±æ˜¯å’±ä»¬è¦ç®¡ç†çš„å­è¿›ç¨‹äº†ï¼Œ":"åé¢çš„æ˜¯åå­—ï¼Œæœ€å¥½åˆ«ä¹±å†™å’Œå®é™…è¿›ç¨‹
                                æœ‰ç‚¹å…³è”æœ€å¥½ã€‚è¿™æ ·çš„programæˆ‘ä»¬å¯ä»¥è®¾ç½®ä¸€ä¸ªæˆ–å¤šä¸ªï¼Œä¸€ä¸ªprogramå°±æ˜¯
                                è¦è¢«ç®¡ç†çš„ä¸€ä¸ªè¿›ç¨‹
;command=/bin/cat              ; è¿™ä¸ªå°±æ˜¯æˆ‘ä»¬çš„è¦å¯åŠ¨è¿›ç¨‹çš„å‘½ä»¤è·¯å¾„äº†ï¼Œå¯ä»¥å¸¦å‚æ•°
                                ä¾‹å­ï¼š/home/test.py -a 'hehe'
                                æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬çš„commandåªèƒ½æ˜¯é‚£ç§åœ¨ç»ˆç«¯è¿è¡Œçš„è¿›ç¨‹ï¼Œä¸èƒ½æ˜¯
                                å®ˆæŠ¤è¿›ç¨‹ã€‚è¿™ä¸ªæƒ³æƒ³ä¹ŸçŸ¥é“äº†ï¼Œæ¯”å¦‚è¯´command=service httpd startã€‚
                                httpdè¿™ä¸ªè¿›ç¨‹è¢«linuxçš„serviceç®¡ç†äº†ï¼Œæˆ‘ä»¬çš„supervisorå†å»å¯åŠ¨è¿™ä¸ªå‘½ä»¤
                                è¿™å·²ç»ä¸æ˜¯ä¸¥æ ¼æ„ä¹‰çš„å­è¿›ç¨‹äº†ã€‚
                                è¿™ä¸ªæ˜¯ä¸ªå¿…é¡»è®¾ç½®çš„é¡¹
;process_name=%(program_name)s ; è¿™ä¸ªæ˜¯è¿›ç¨‹åï¼Œå¦‚æœæˆ‘ä»¬ä¸‹é¢çš„numprocså‚æ•°ä¸º1çš„è¯ï¼Œå°±ä¸ç”¨ç®¡è¿™ä¸ªå‚æ•°
                                 äº†ï¼Œå®ƒé»˜è®¤å€¼%(program_name)sä¹Ÿå°±æ˜¯ä¸Šé¢çš„é‚£ä¸ªprogramå†’å·åé¢çš„åå­—ï¼Œ
                                 ä½†æ˜¯å¦‚æœnumprocsä¸ºå¤šä¸ªçš„è¯ï¼Œé‚£å°±ä¸èƒ½è¿™ä¹ˆå¹²äº†ã€‚æƒ³æƒ³ä¹ŸçŸ¥é“ï¼Œä¸å¯èƒ½æ¯ä¸ª
                                 è¿›ç¨‹éƒ½ç”¨åŒä¸€ä¸ªè¿›ç¨‹åå§ã€‚

                                
;numprocs=1                    ; å¯åŠ¨è¿›ç¨‹çš„æ•°ç›®ã€‚å½“ä¸ä¸º1æ—¶ï¼Œå°±æ˜¯è¿›ç¨‹æ± çš„æ¦‚å¿µï¼Œæ³¨æ„process_nameçš„è®¾ç½®
                                 é»˜è®¤ä¸º1    ã€‚ã€‚éå¿…é¡»è®¾ç½®
;directory=/tmp                ; è¿›ç¨‹è¿è¡Œå‰ï¼Œä¼šå‰åˆ‡æ¢åˆ°è¿™ä¸ªç›®å½•
                                 é»˜è®¤ä¸è®¾ç½®ã€‚ã€‚ã€‚éå¿…é¡»è®¾ç½®
;umask=022                     ; è¿›ç¨‹æ©ç ï¼Œé»˜è®¤noneï¼Œéå¿…é¡»
;priority=999                  ; å­è¿›ç¨‹å¯åŠ¨å…³é—­ä¼˜å…ˆçº§ï¼Œä¼˜å…ˆçº§ä½çš„ï¼Œæœ€å…ˆå¯åŠ¨ï¼Œå…³é—­çš„æ—¶å€™æœ€åå…³é—­
                                 é»˜è®¤å€¼ä¸º999 ã€‚ã€‚éå¿…é¡»è®¾ç½®
;autostart=true                ; å¦‚æœæ˜¯trueçš„è¯ï¼Œå­è¿›ç¨‹å°†åœ¨supervisordå¯åŠ¨åè¢«è‡ªåŠ¨å¯åŠ¨
                                 é»˜è®¤å°±æ˜¯true   ã€‚ã€‚éå¿…é¡»è®¾ç½®
;autorestart=unexpected        ; è¿™ä¸ªæ˜¯è®¾ç½®å­è¿›ç¨‹æŒ‚æ‰åè‡ªåŠ¨é‡å¯çš„æƒ…å†µï¼Œæœ‰ä¸‰ä¸ªé€‰é¡¹ï¼Œfalse,unexpected
                                 å’Œtrueã€‚å¦‚æœä¸ºfalseçš„æ—¶å€™ï¼Œæ— è®ºä»€ä¹ˆæƒ…å†µä¸‹ï¼Œéƒ½ä¸ä¼šè¢«é‡æ–°å¯åŠ¨ï¼Œ
                                 å¦‚æœä¸ºunexpectedï¼Œåªæœ‰å½“è¿›ç¨‹çš„é€€å‡ºç ä¸åœ¨ä¸‹é¢çš„exitcodesé‡Œé¢å®šä¹‰çš„é€€ 
                                 å‡ºç çš„æ—¶å€™ï¼Œæ‰ä¼šè¢«è‡ªåŠ¨é‡å¯ã€‚å½“ä¸ºtrueçš„æ—¶å€™ï¼Œåªè¦å­è¿›ç¨‹æŒ‚æ‰ï¼Œå°†ä¼šè¢«æ— 
                                 æ¡ä»¶çš„é‡å¯
;startsecs=1                   ; è¿™ä¸ªé€‰é¡¹æ˜¯å­è¿›ç¨‹å¯åŠ¨å¤šå°‘ç§’ä¹‹åï¼Œæ­¤æ—¶çŠ¶æ€å¦‚æœæ˜¯runningï¼Œåˆ™æˆ‘ä»¬è®¤ä¸ºå¯
                                 åŠ¨æˆåŠŸäº†
                                 é»˜è®¤å€¼ä¸º1 ã€‚ã€‚éå¿…é¡»è®¾ç½®
;startretries=3                ; å½“è¿›ç¨‹å¯åŠ¨å¤±è´¥åï¼Œæœ€å¤§å°è¯•å¯åŠ¨çš„æ¬¡æ•°ã€‚ã€‚å½“è¶…è¿‡3æ¬¡åï¼Œsupervisorå°†æŠŠ
                                 æ­¤è¿›ç¨‹çš„çŠ¶æ€ç½®ä¸ºFAIL
                                 é»˜è®¤å€¼ä¸º3 ã€‚ã€‚éå¿…é¡»è®¾ç½®
;exitcodes=0,2                 ; æ³¨æ„å’Œä¸Šé¢çš„çš„autorestart=unexpectedå¯¹åº”ã€‚ã€‚exitcodesé‡Œé¢çš„å®šä¹‰çš„
                                 é€€å‡ºç æ˜¯expectedçš„ã€‚
;stopsignal=QUIT               ; è¿›ç¨‹åœæ­¢ä¿¡å·ï¼Œå¯ä»¥ä¸ºTERM, HUP, INT, QUIT, KILL, USR1, or USR2ç­‰ä¿¡å·
                                  é»˜è®¤ä¸ºTERM ã€‚ã€‚å½“ç”¨è®¾å®šçš„ä¿¡å·å»å¹²æ‰è¿›ç¨‹ï¼Œé€€å‡ºç ä¼šè¢«è®¤ä¸ºæ˜¯expected
                                  éå¿…é¡»è®¾ç½®
;stopwaitsecs=10               ; è¿™ä¸ªæ˜¯å½“æˆ‘ä»¬å‘å­è¿›ç¨‹å‘é€stopsignalä¿¡å·åï¼Œåˆ°ç³»ç»Ÿè¿”å›ä¿¡æ¯
                                 ç»™supervisordï¼Œæ‰€ç­‰å¾…çš„æœ€å¤§æ—¶é—´ã€‚ è¶…è¿‡è¿™ä¸ªæ—¶é—´ï¼Œsupervisordä¼šå‘è¯¥
                                 å­è¿›ç¨‹å‘é€ä¸€ä¸ªå¼ºåˆ¶killçš„ä¿¡å·ã€‚
                                 é»˜è®¤ä¸º10ç§’ã€‚ã€‚éå¿…é¡»è®¾ç½®
;stopasgroup=false             ; è¿™ä¸ªä¸œè¥¿ä¸»è¦ç”¨äºï¼Œsupervisordç®¡ç†çš„å­è¿›ç¨‹ï¼Œè¿™ä¸ªå­è¿›ç¨‹æœ¬èº«è¿˜æœ‰
                                 å­è¿›ç¨‹ã€‚é‚£ä¹ˆæˆ‘ä»¬å¦‚æœä»…ä»…å¹²æ‰supervisordçš„å­è¿›ç¨‹çš„è¯ï¼Œå­è¿›ç¨‹çš„å­è¿›ç¨‹
                                 æœ‰å¯èƒ½ä¼šå˜æˆå­¤å„¿è¿›ç¨‹ã€‚æ‰€ä»¥å’±ä»¬å¯ä»¥è®¾ç½®å¯ä¸ªé€‰é¡¹ï¼ŒæŠŠæ•´ä¸ªè¯¥å­è¿›ç¨‹çš„
                                 æ•´ä¸ªè¿›ç¨‹ç»„éƒ½å¹²æ‰ã€‚ è®¾ç½®ä¸ºtrueçš„è¯ï¼Œä¸€èˆ¬killasgroupä¹Ÿä¼šè¢«è®¾ç½®ä¸ºtrueã€‚
                                 éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¯¥é€‰é¡¹å‘é€çš„æ˜¯stopä¿¡å·
                                 é»˜è®¤ä¸ºfalseã€‚ã€‚éå¿…é¡»è®¾ç½®ã€‚ã€‚
;killasgroup=false             ; è¿™ä¸ªå’Œä¸Šé¢çš„stopasgroupç±»ä¼¼ï¼Œä¸è¿‡å‘é€çš„æ˜¯killä¿¡å·
;user=chrism                   ; å¦‚æœsupervisordæ˜¯rootå¯åŠ¨ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œè®¾ç½®è¿™ä¸ªérootç”¨æˆ·ï¼Œå¯ä»¥ç”¨æ¥
                                 ç®¡ç†è¯¥program
                                 é»˜è®¤ä¸è®¾ç½®ã€‚ã€‚ã€‚éå¿…é¡»è®¾ç½®é¡¹
;redirect_stderr=true          ; å¦‚æœä¸ºtrueï¼Œåˆ™stderrçš„æ—¥å¿—ä¼šè¢«å†™å…¥stdoutæ—¥å¿—æ–‡ä»¶ä¸­
                                 é»˜è®¤ä¸ºfalseï¼Œéå¿…é¡»è®¾ç½®
;stdout_logfile=/a/path        ; å­è¿›ç¨‹çš„stdoutçš„æ—¥å¿—è·¯å¾„ï¼Œå¯ä»¥æŒ‡å®šè·¯å¾„ï¼ŒAUTOï¼Œnoneç­‰ä¸‰ä¸ªé€‰é¡¹ã€‚
                                 è®¾ç½®ä¸ºnoneçš„è¯ï¼Œå°†æ²¡æœ‰æ—¥å¿—äº§ç”Ÿã€‚è®¾ç½®ä¸ºAUTOçš„è¯ï¼Œå°†éšæœºæ‰¾ä¸€ä¸ªåœ°æ–¹
                                 ç”Ÿæˆæ—¥å¿—æ–‡ä»¶ï¼Œè€Œä¸”å½“supervisordé‡æ–°å¯åŠ¨çš„æ—¶å€™ï¼Œä»¥å‰çš„æ—¥å¿—æ–‡ä»¶ä¼šè¢«
                                 æ¸…ç©ºã€‚å½“ redirect_stderr=trueçš„æ—¶å€™ï¼Œsterrä¹Ÿä¼šå†™è¿›è¿™ä¸ªæ—¥å¿—æ–‡ä»¶
;stdout_logfile_maxbytes=1MB   ; æ—¥å¿—æ–‡ä»¶æœ€å¤§å¤§å°ï¼Œå’Œ[supervisord]ä¸­å®šä¹‰çš„ä¸€æ ·ã€‚é»˜è®¤ä¸º50
;stdout_logfile_backups=10     ; å’Œ[supervisord]å®šä¹‰çš„ä¸€æ ·ã€‚é»˜è®¤10
;stdout_capture_maxbytes=1MB   ; è¿™ä¸ªä¸œè¥¿æ˜¯è®¾å®šcaptureç®¡é“çš„å¤§å°ï¼Œå½“å€¼ä¸ä¸º0çš„æ—¶å€™ï¼Œå­è¿›ç¨‹å¯ä»¥ä»stdout
                                 å‘é€ä¿¡æ¯ï¼Œè€Œsupervisorå¯ä»¥æ ¹æ®ä¿¡æ¯ï¼Œå‘é€ç›¸åº”çš„eventã€‚
                                 é»˜è®¤ä¸º0ï¼Œä¸º0çš„æ—¶å€™è¡¨è¾¾å…³é—­ç®¡é“ã€‚ã€‚ã€‚éå¿…é¡»é¡¹
;stdout_events_enabled=false   ; å½“è®¾ç½®ä¸ºtureçš„æ—¶å€™ï¼Œå½“å­è¿›ç¨‹ç”±stdoutå‘æ–‡ä»¶æè¿°ç¬¦ä¸­å†™æ—¥å¿—çš„æ—¶å€™ï¼Œå°†
                                 è§¦å‘supervisordå‘é€PROCESS_LOG_STDOUTç±»å‹çš„event
                                 é»˜è®¤ä¸ºfalseã€‚ã€‚ã€‚éå¿…é¡»è®¾ç½®
;stderr_logfile=/a/path        ; è¿™ä¸ªä¸œè¥¿æ˜¯è®¾ç½®stderrå†™çš„æ—¥å¿—è·¯å¾„ï¼Œå½“redirect_stderr=trueã€‚è¿™ä¸ªå°±ä¸ç”¨
                                 è®¾ç½®äº†ï¼Œè®¾ç½®äº†ä¹Ÿæ˜¯ç™½æ­ã€‚å› ä¸ºå®ƒä¼šè¢«å†™å…¥stdout_logfileçš„åŒä¸€ä¸ªæ–‡ä»¶ä¸­
                                 é»˜è®¤ä¸ºAUTOï¼Œä¹Ÿå°±æ˜¯éšä¾¿æ‰¾ä¸ªåœ°å­˜ï¼Œsupervisordé‡å¯è¢«æ¸…ç©ºã€‚ã€‚éå¿…é¡»è®¾ç½®
;stderr_logfile_maxbytes=1MB   ; è¿™ä¸ªå‡ºç°å¥½å‡ æ¬¡äº†ï¼Œå°±ä¸é‡å¤äº†
;stderr_logfile_backups=10     ; è¿™ä¸ªä¹Ÿæ˜¯
;stderr_capture_maxbytes=1MB   ; è¿™ä¸ªä¸€æ ·ï¼Œå’Œstdout_captureä¸€æ ·ã€‚ é»˜è®¤ä¸º0ï¼Œå…³é—­çŠ¶æ€
;stderr_events_enabled=false   ; è¿™ä¸ªä¹Ÿæ˜¯ä¸€æ ·ï¼Œé»˜è®¤ä¸ºfalse
;environment=A="1",B="2"       ; è¿™ä¸ªæ˜¯è¯¥å­è¿›ç¨‹çš„ç¯å¢ƒå˜é‡ï¼Œå’Œåˆ«çš„å­è¿›ç¨‹æ˜¯ä¸å…±äº«çš„
;serverurl=AUTO                ; 

; The below sample eventlistener section shows all possible
; eventlistener subsection values, create one or more 'real'
; eventlistener: sections to be able to handle event notifications
; sent by supervisor.

;[eventlistener:theeventlistenername] ;è¿™ä¸ªä¸œè¥¿å…¶å®å’Œprogramçš„åœ°ä½æ˜¯ä¸€æ ·çš„ï¼Œä¹Ÿæ˜¯suopervisorå¯åŠ¨çš„å­è¿›
                                       ç¨‹ï¼Œä¸è¿‡å®ƒå¹²çš„æ´»æ˜¯è®¢é˜…supervisordå‘é€çš„eventã€‚ä»–çš„åå­—å°±å«
                                       listeneräº†ã€‚æˆ‘ä»¬å¯ä»¥åœ¨listeneré‡Œé¢åšä¸€ç³»åˆ—å¤„ç†ï¼Œæ¯”å¦‚æŠ¥è­¦ç­‰ç­‰
                                       æ¥¼ä¸»è¿™ä¸¤å¤©å¹²çš„æ´»ï¼Œå°±æ˜¯å¼„çš„è¿™ç©æ„
;command=/bin/eventlistener    ; è¿™ä¸ªå’Œä¸Šé¢çš„programä¸€æ ·ï¼Œè¡¨ç¤ºlistenerçš„å¯æ‰§è¡Œæ–‡ä»¶çš„è·¯å¾„
;process_name=%(program_name)s ; è¿™ä¸ªä¹Ÿä¸€æ ·ï¼Œè¿›ç¨‹åï¼Œå½“ä¸‹é¢çš„numprocsä¸ºå¤šä¸ªçš„æ—¶å€™ï¼Œæ‰éœ€è¦ã€‚å¦åˆ™é»˜è®¤å°±
                                 OKäº†
;numprocs=1                    ; ç›¸åŒçš„listenerå¯åŠ¨çš„ä¸ªæ•°
;events=EVENT                  ; eventäº‹ä»¶çš„ç±»å‹ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåªæœ‰å†™åœ¨è¿™ä¸ªåœ°æ–¹çš„äº‹ä»¶ç±»å‹ã€‚æ‰ä¼šè¢«å‘é€
                      
                                 
;buffer_size=10                ; è¿™ä¸ªæ˜¯eventé˜Ÿåˆ—ç¼“å­˜å¤§å°ï¼Œå•ä½ä¸å¤ªæ¸…æ¥šï¼Œæ¥¼ä¸»çŒœæµ‹åº”è¯¥æ˜¯ä¸ªå§ã€‚å½“buffer
                                 è¶…è¿‡10çš„æ—¶å€™ï¼Œæœ€æ—§çš„eventå°†ä¼šè¢«æ¸…é™¤ï¼Œå¹¶æŠŠæ–°çš„eventæ”¾è¿›å»ã€‚
                                 é»˜è®¤å€¼ä¸º10ã€‚ã€‚éå¿…é¡»é€‰é¡¹
;directory=/tmp                ; è¿›ç¨‹æ‰§è¡Œå‰ï¼Œä¼šåˆ‡æ¢åˆ°è¿™ä¸ªç›®å½•ä¸‹æ‰§è¡Œ
                                 é»˜è®¤ä¸ºä¸åˆ‡æ¢ã€‚ã€‚ã€‚éå¿…é¡»
;umask=022                     ; æ·¹æ²¡ï¼Œé»˜è®¤ä¸ºnoneï¼Œä¸è¯´äº†
;priority=-1                   ; å¯åŠ¨ä¼˜å…ˆçº§ï¼Œé»˜è®¤-1ï¼Œä¹Ÿä¸æ‰¯äº†
;autostart=true                ; æ˜¯å¦éšsupervisordå¯åŠ¨ä¸€èµ·å¯åŠ¨ï¼Œé»˜è®¤true
;autorestart=unexpected        ; æ˜¯å¦è‡ªåŠ¨é‡å¯ï¼Œå’Œprogramä¸€ä¸ªæ ·ï¼Œåˆ†true,false,unexpectedç­‰ï¼Œæ³¨æ„
                                  unexpectedå’Œexitcodesçš„å…³ç³»
;startsecs=1                   ; ä¹Ÿæ˜¯ä¸€æ ·ï¼Œè¿›ç¨‹å¯åŠ¨åè·‘äº†å‡ ç§’é’Ÿï¼Œæ‰è¢«è®¤å®šä¸ºæˆåŠŸå¯åŠ¨ï¼Œé»˜è®¤1
;startretries=3                ; å¤±è´¥æœ€å¤§å°è¯•æ¬¡æ•°ï¼Œé»˜è®¤3
;exitcodes=0,2                 ; æœŸæœ›æˆ–è€…è¯´é¢„æ–™ä¸­çš„è¿›ç¨‹é€€å‡ºç ï¼Œ
;stopsignal=QUIT               ; å¹²æ‰è¿›ç¨‹çš„ä¿¡å·ï¼Œé»˜è®¤ä¸ºTERMï¼Œæ¯”å¦‚è®¾ç½®ä¸ºQUITï¼Œé‚£ä¹ˆå¦‚æœQUITæ¥å¹²è¿™ä¸ªè¿›ç¨‹
                                 é‚£ä¹ˆä¼šè¢«è®¤ä¸ºæ˜¯æ­£å¸¸ç»´æŠ¤ï¼Œé€€å‡ºç ä¹Ÿè¢«è®¤ä¸ºæ˜¯expectedä¸­çš„
;stopwaitsecs=10               ; max num secs to wait b4 SIGKILL (default 10)
;stopasgroup=false             ; send stop signal to the UNIX process group (default false)
;killasgroup=false             ; SIGKILL the UNIX process group (def false)
;user=chrism                   ;è®¾ç½®æ™®é€šç”¨æˆ·ï¼Œå¯ä»¥ç”¨æ¥ç®¡ç†è¯¥listenerè¿›ç¨‹ã€‚
                                é»˜è®¤ä¸ºç©ºã€‚ã€‚éå¿…é¡»è®¾ç½®
;redirect_stderr=true          ; ä¸ºtrueçš„è¯ï¼Œstderrçš„logä¼šå¹¶å…¥stdoutçš„logé‡Œé¢
                                é»˜è®¤ä¸ºfalseã€‚ã€‚ã€‚éå¿…é¡»è®¾ç½®
;stdout_logfile=/a/path        ; è¿™ä¸ªä¸è¯´äº†ï¼Œå¥½å‡ éäº†
;stdout_logfile_maxbytes=1MB   ; è¿™ä¸ªä¹Ÿæ˜¯
;stdout_logfile_backups=10     ; è¿™ä¸ªä¹Ÿæ˜¯
;stdout_events_enabled=false   ; è¿™ä¸ªå…¶å®æ˜¯é”™çš„ï¼Œlisteneræ˜¯ä¸èƒ½å‘é€event
;stderr_logfile=/a/path        ; è¿™ä¸ªä¹Ÿæ˜¯
;stderr_logfile_maxbytes=1MB   ; è¿™ä¸ªä¹Ÿæ˜¯
;stderr_logfile_backups        ; è¿™ä¸ªä¸è¯´äº†
;stderr_events_enabled=false   ; è¿™ä¸ªä¹Ÿæ˜¯é”™çš„ï¼Œlistenerä¸èƒ½å‘é€event
;environment=A="1",B="2"       ; è¿™ä¸ªæ˜¯è¯¥å­è¿›ç¨‹çš„ç¯å¢ƒå˜é‡
                                 é»˜è®¤ä¸ºç©ºã€‚ã€‚ã€‚éå¿…é¡»è®¾ç½®
;serverurl=AUTO                ; override serverurl computation (childutils)

; The below sample group section shows all possible group values,
; create one or more 'real' group: sections to create "heterogeneous"
; process groups.

;[group:thegroupname]  ;è¿™ä¸ªä¸œè¥¿å°±æ˜¯ç»™programsåˆ†ç»„ï¼Œåˆ’åˆ†åˆ°ç»„é‡Œé¢çš„programã€‚æˆ‘ä»¬å°±ä¸ç”¨ä¸€ä¸ªä¸€ä¸ªå»æ“ä½œäº†
                         æˆ‘ä»¬å¯ä»¥å¯¹ç»„åè¿›è¡Œç»Ÿä¸€çš„æ“ä½œã€‚ æ³¨æ„ï¼šprogramè¢«åˆ’åˆ†åˆ°ç»„é‡Œé¢ä¹‹åï¼Œå°±ç›¸å½“äºåŸæ¥
                         çš„é…ç½®ä»supervisorçš„é…ç½®æ–‡ä»¶é‡Œæ¶ˆå¤±äº†ã€‚ã€‚ã€‚supervisoråªä¼šå¯¹ç»„è¿›è¡Œç®¡ç†ï¼Œè€Œä¸å†
                         ä¼šå¯¹ç»„é‡Œé¢çš„å•ä¸ªprogramè¿›è¡Œç®¡ç†äº†
;programs=progname1,progname2  ; ç»„æˆå‘˜ï¼Œç”¨é€—å·åˆ†å¼€
                                 è¿™ä¸ªæ˜¯ä¸ªå¿…é¡»çš„è®¾ç½®é¡¹
;priority=999                  ; ä¼˜å…ˆçº§ï¼Œç›¸å¯¹äºç»„å’Œç»„ä¹‹é—´è¯´çš„
                                 é»˜è®¤999ã€‚ã€‚éå¿…é¡»é€‰é¡¹

; The [include] section can just contain the "files" setting.  This
; setting can list multiple files (separated by whitespace or
; newlines).  It can also contain wildcards.  The filenames are
; interpreted as relative to this file.  Included files *cannot*
; include files themselves.

;[include]                         ;è¿™ä¸ªä¸œè¥¿æŒºæœ‰ç”¨çš„ï¼Œå½“æˆ‘ä»¬è¦ç®¡ç†çš„è¿›ç¨‹å¾ˆå¤šçš„æ—¶å€™ï¼Œå†™åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œé¢
                                    å°±æœ‰ç‚¹å¤§äº†ã€‚æˆ‘ä»¬å¯ä»¥æŠŠé…ç½®ä¿¡æ¯å†™åˆ°å¤šä¸ªæ–‡ä»¶ä¸­ï¼Œç„¶åincludeè¿‡æ¥
;files = relative/directory/*.ini
OK,ä¸Šé¢æåˆ°çš„éå¿…é¡»è®¾ç½®é¡¹ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œéƒ½æ˜¯æœ‰é»˜è®¤å€¼çš„ï¼Œå¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦å»è®¾ç½®ã€‚ã€‚ã€‚å¦‚æœä¸è®¾ç½®çš„ï¼Œsupervisorä¹Ÿèƒ½ç”¨èµ·æ¥

è¿™ä¸€ç¯‡å…ˆæ€»ç»“åˆ°è¿™é‡Œäº†ï¼Œä¸‹ä¸€ç¯‡ææeventå’Œxml_rpc