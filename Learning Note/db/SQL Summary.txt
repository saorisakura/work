SQL的WHERE子句中包含多个AND和OR

SQL的WHERE子句中包含多个AND和OR

关于SQL的where子句中包含多个and和or是计算顺序问题，SQL在处理操作时会优先处理 and 操作，这就是很多人会得到很多错误的原因，举个例子：

加入有表product字段如下：id、product_id、product_price、product_name

现在要查找产品号为100或者101,并且价格大于200的商品，你可能会这样做：

select * from product where product_id = 100 or product_id = 101 and product_price > 200
这是错误的，SQL会这样理解，SQL首先进行 and 的操作，最后就成了这个意思：查找产品号为101并且价格大于200 或者 产品号为100 的商品。

解决办法很简答，只要使用圆括号就行了：

select * from product where (product_id = 100 or product_id = 101) and product_price > 200
===============今天又被这个问题坑了===============

SELECT person_id, first_name, last_name FROM people WHERE first_name like :first_name or last_name like :last_name AND ((person_id > :_person_id)) ORDER BY person_id ASC LIMIT 2
执行这条sql 出现的这个问题

SELECT * FROM people ;

person_id  first_name  last_name  
---------  ----------  ---------  
1          JOHN        DOE        
2          JOHN        DOE        
3          JOHN        DOE        
4          JOHN        DOE        
5          JOHN        DOE        
6          JOHN        DOE        
7          JOHN        DOE        
8          JOHN        DOE
SELECT person_id, first_name, last_name FROM people WHERE first_name like '%JOHN%' or last_name like '%DOE%' AND ((person_id > 2)) ORDER BY person_id ASC LIMIT 2

person_id  first_name  last_name  
---------  ----------  ---------  
1          JOHN        DOE        
2          JOHN        DOE
OR 的前一个条件总是成立，总是返回前两个记录，不管 person_id 的大小。

 

AND 和 OR 运算符
AND 和 OR 可在 WHERE 子语句中把两个或多个条件结合起来。

如果第一个条件和第二个条件都成立，则 AND 运算符显示一条记录。

如果第一个条件和第二个条件中只要有一个成立，则 OR 运算符显示一条记录。

OR 运算符只要有一个为 true ，OR 表达式为true ，则显示该记录。

=========END=========